/* ----------------------------------
   PAGE BACKGROUND
---------------------------------- */
.lightPage {
  background: #ffffff;
  width: 100%;
  height: 100%;
  color: #222;
  --legend-bg: rgba(255, 255, 255, 0.9);
}

.darkPage {
  background: #0d1b2a;
  width: 100%;
  height: 100%;
  color: #e6e6e6;
  --legend-bg: rgba(0, 0, 0, 0.55);
}

/* ----------------------------------
   MAIN CONTAINER
---------------------------------- */
.container {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  position: relative;
  padding: 12px 18px;
  z-index: 0;
}

/* ----------------------------------
   HEADER
---------------------------------- */
.headerRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  padding: 8px 4px 16px;
  position: relative;
  z-index: 1200;
}

.titleText {
  font-size: 22px;
  font-weight: 600;
  margin: 0;
  color: inherit;
}

/* ----------------------------------
   ENABLE CONTROLS TO RENDER CORRECTLY
---------------------------------- */

/* Before: pointer-events:none blocked legend + hid it entirely */
:global(.leaflet-control-container) {
  pointer-events: auto !important;
  z-index: 450 !important; /* prevent covering header */
}

/* Leaflet bottom-right container */
:global(.leaflet-bottom.leaflet-right) {
  bottom: 20px !important;
  right: 20px !important;
  z-index: 600 !important;
  pointer-events: auto !important; /* container does not capture clicks */
}

/* ----------------------------------
   FILTER ROW
---------------------------------- */
.filterRow {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  z-index: 2000;
}

/* ----------------------------------
   DATE INPUT FIELDS
---------------------------------- */
.dateInput {
  padding: 6px 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
  width: 150px;
  transition: 0.15s ease;
}

.dateInputDark {
  background: #1a2738;
  color: #ffffff;
  border-color: #465a74;
}

.dateInputDark:hover {
  border-color: #6acfde;
}

.dateInputDark:focus {
  outline: none;
  border-color: #6acfde;
  box-shadow: 0 0 4px rgba(106, 207, 222, 0.6);
}

/* Light mode */
.lightPage .dateInput {
  background: #ffffff;
  color: #222;
  border-color: #ccc;
}

.lightPage .dateInput:hover {
  border-color: #6acfde;
}

.lightPage .dateInput:focus {
  outline: none;
  border-color: #3a8bbd;
  box-shadow: 0 0 3px rgba(58, 139, 189, 0.6);
}

/* Error message */
.errorMsg {
  color: #de6a6a;
  font-size: 13px;
  font-weight: 500;
}

/* ----------------------------------
   MAP AREA
---------------------------------- */
.mapArea {
  position: relative;
  width: 100%;
  height: 90vh;
  border-radius: 12px;
  overflow: visible !important;
  margin-top: 10px;
}

.mapContainer {
  width: 100%;
  height: 100%;
  border-radius: 12px;
}

/* ----------------------------------
   DARK MAP OVERLAY EFFECT
---------------------------------- */
.darkMap {
  filter: brightness(0.78) contrast(1.1);
}

/* ----------------------------------
   POPUPS
---------------------------------- */
:global(.leaflet-popup-content-wrapper) {
  border-radius: 10px !important;
  padding: 10px 12px !important;
}

:global(.leaflet-popup-content) {
  margin: 0 !important;
  font-size: 14px !important;
}

/* Light */
.lightPage :global(.leaflet-popup-content-wrapper) {
  background: #ffffff !important;
  color: #222 !important;
  border: 1px solid #e3e3e3 !important;
}

/* Dark */
.darkPage :global(.leaflet-popup-content-wrapper),
.darkPage :global(.leaflet-popup-tip) {
  background: #2d4059 !important;
  border: 1px solid #4b5f79 !important;
  color: #f5f5f5 !important;
}

/* ----------------------------------
   TOOLTIP
---------------------------------- */
.lightTooltip,
.darkTooltip {
  padding: 6px 10px;
  font-size: 13px;
  border-radius: 6px;
}

.lightTooltip {
  background: #ffffff !important;
  border: 1px solid #e3e3e3 !important;
  color: #222 !important;
}

.darkTooltip {
  background: #2d4059 !important;
  border: 1px solid #4b5f79 !important;
  color: #ffffff !important;
}

/* ----------------------------------
   MAP CONTROLS
---------------------------------- */
.darkPage :global(.leaflet-control-attribution) {
  background: rgba(45, 64, 89, 0.85) !important;
  color: #ddd !important;
}

.darkPage :global(.leaflet-control-attribution a) {
  color: #6acfde !important;
}

/* Hide zoom buttons */
:global(.leaflet-control-zoom) {
  display: none !important;
}

:global(.leaflet-control) {
  z-index: 2000 !important;
}

/* ----------------------------------
   CLUSTERS
---------------------------------- */
:global(.marker-cluster) {
  cursor: pointer;
  transition: transform 0.2s ease;
}

:global(.marker-cluster:hover) {
  transform: scale(1.12);
}

/* ----------------------------------
   LABELS & LEGEND
---------------------------------- */
.bottomLeftLabel {
  position: absolute;
  left: 12px;
  bottom: 12px;
  padding: 6px 12px;
  background: rgba(255, 255, 255, 0.75);
  border-radius: 8px;
  font-size: 13px;
  backdrop-filter: blur(4px);
  z-index: 1000;
}

.darkPage .bottomLeftLabel {
  background: rgba(0, 0, 0, 0.55);
  color: #ffffff;
}

.legendItem {
  display: flex;
  align-items: center;
  margin: 4px 0;
}

.legendDot {
  width: 13px;
  height: 13px;
  border-radius: 50%;
  margin-right: 8px;
}

/* ----------------------------------
   POPUP BUTTON
---------------------------------- */
.detailsButton {
  margin-top: 8px;
  padding: 7px 12px;
  background: #1f6feb;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  transition: 0.15s ease;
}

.detailsButton:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.legendBox {
  position: absolute; /* absolute inside the map container */
  width: 160px; /* fixed width */
  height: 180px; /* fixed height */
  cursor: move;
  user-select: none;
  padding: 10px 12px;
  background: var(--legend-bg);
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
  border: 1px solid rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(4px);
  font-size: 13px;
  z-index: 10000; /* higher than map */
  pointer-events: auto !important;
  opacity: 1 !important;
  left: auto; /* initial position handled in JSX */
  top: auto; /* initial position handled in JSX */
  bottom: 20px; /* fallback bottom-right */
  right: 20px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

.darkPage .legendBox {
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: #fff;
}

/* New filter row styles */
.filterRowExtra {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 8px;
  margin-bottom: 16px;
}

.filterInputs {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.totalProjects {
  font-weight: 500;
  margin-left: auto;
}
